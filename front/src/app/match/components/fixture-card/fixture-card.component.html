<div
  class="relative flex flex-col gap-3 rounded-xl backdrop-blur border p-4 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden"
  [ngClass]="{
    'bg-surface-dark/80 border-surface-highlight/30 hover:border-surface-highlight/60': fixture().parsedStatus !== 'LIVE',
    'bg-primary/5 border-primary/30 hover:border-primary/50': fixture().parsedStatus === 'LIVE',
    'opacity-90 hover:opacity-100': fixture().parsedStatus === 'FINISHED'
  }"
  (click)="cardClicked.emit(fixture().event_key)"
>
  @if (fixture().parsedStatus === 'LIVE') {
    <div class="absolute -right-8 -top-8 h-32 w-32 rounded-full bg-primary/20 blur-3xl"></div>
    <div class="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent"></div>
  }

  <div class="flex items-center justify-between relative z-10">
    <div class="flex items-center gap-2">
      <div class="h-5 w-5 rounded bg-surface-highlight/50 flex items-center justify-center overflow-hidden flex-shrink-0">
        @if (fixture().league_logo) {
          <img
            [src]="fixture().league_logo"
            [alt]="fixture().league_name"
            class="w-full h-full object-contain"
          />
        }
      </div>
      <span class="text-xs font-medium text-gray-400 truncate max-w-[140px]">{{ fixture().league_name }}</span>
    </div>

    @switch (fixture().parsedStatus) {
      @case ('LIVE') {
        <div class="flex items-center gap-1.5 bg-background-dark/70 px-2.5 py-1 rounded-lg border border-primary/20">
          <span class="h-1.5 w-1.5 rounded-full bg-primary animate-pulse shadow-[0_0_6px_#0df280]"></span>
          <app-match-timer [statusSignal]="timerStatus()" />
        </div>
      }
      @case ('SCHEDULED') {
        <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-surface-highlight/20">
          <span class="material-symbols-outlined text-white text-[12px]">schedule</span>
          <span class="text-xs font-semibold text-white">{{ fixture().event_time }}</span>
        </div>
      }
      @case ('FINISHED') {
        <div class="px-2.5 py-1 rounded-lg bg-white/5">
          <span class="text-xs font-bold text-text-secondary">FT</span>
        </div>
      }
    }
  </div>

  <div class="flex items-center justify-between relative z-10 py-2">
    <div class="flex flex-col items-center gap-2 flex-1">
      <div
        class="h-12 w-12 rounded-lg bg-white/5 p-2 ring-1 ring-white/10 flex items-center justify-center"
        [class.grayscale]="fixture().parsedStatus === 'FINISHED'"
      >
        <img
          [src]="fixture().home_team_logo"
          [alt]="fixture().event_home_team"
          class="w-full h-full object-contain"
        />
      </div>
      <span
        class="text-xs font-semibold text-center leading-tight max-w-[80px] truncate"
        [ngClass]="{
          'text-gray-900': fixture().parsedStatus === 'LIVE',
          'text-white': fixture().parsedStatus === 'SCHEDULED',
          'text-gray-500': fixture().parsedStatus === 'FINISHED'
        }"
      >
        {{ fixture().event_home_team }}
      </span>
    </div>

    <div class="flex flex-col items-center justify-center px-3">
      @if (fixture().parsedStatus === 'SCHEDULED') {
        <div class="h-10 w-10 rounded-lg bg-gradient-to-br from-surface-highlight/30 to-surface-highlight/10 border border-surface-highlight/50 flex items-center justify-center">
          <span class="text-xs font-black text-text-secondary">VS</span>
        </div>
      } @else {
        <div class="flex items-center gap-1">
          <span
            class="text-3xl font-black"
            [class.text-primary]="fixture().parsedStatus === 'LIVE'"
            [class.text-gray-400]="fixture().parsedStatus === 'FINISHED'"
          >
            {{ fixture().homeScore }}
          </span>
          <span class="text-xl font-bold text-gray-500 mx-1">-</span>
          <span
            class="text-3xl font-black"
            [class.text-primary]="fixture().parsedStatus === 'LIVE'"
            [class.text-gray-400]="fixture().parsedStatus === 'FINISHED'"
          >
            {{ fixture().awayScore }}
          </span>
        </div>
      }
    </div>

    <div class="flex flex-col items-center gap-2 flex-1">
      <div
        class="h-12 w-12 rounded-lg bg-white/5 p-2 ring-1 ring-white/10 flex items-center justify-center"
        [class.grayscale]="fixture().parsedStatus === 'FINISHED'"
      >
        <img
          [src]="fixture().away_team_logo"
          [alt]="fixture().event_away_team"
          class="w-full h-full object-contain"
        />
      </div>
      <span
        class="text-xs font-semibold text-center leading-tight max-w-[80px] truncate"
        [ngClass]="{
          'text-gray-900': fixture().parsedStatus === 'LIVE',
          'text-white': fixture().parsedStatus === 'SCHEDULED',
          'text-gray-500': fixture().parsedStatus === 'FINISHED'
        }"
      >
        {{ fixture().event_away_team }}
      </span>
    </div>
  </div>

  <div class="relative z-10">
    @switch (fixture().parsedStatus) {
      @case ('LIVE') {
        <button class="w-full flex items-center justify-center gap-2 rounded-lg bg-primary py-2.5 text-xs font-bold text-background-dark hover:bg-white transition-all group-hover:scale-[1.02]">
          <span class="material-symbols-outlined text-[16px]">query_stats</span>
          Live Stats
        </button>
      }
      @case ('SCHEDULED') {
        <button class="w-full flex items-center justify-center gap-2 rounded-lg border border-primary/30 bg-primary/10 py-2.5 text-xs font-bold text-primary hover:bg-primary hover:text-background-dark transition-all">
          <span class="material-symbols-outlined text-[16px]">neurology</span>
          Predict
        </button>
      }
      @case ('FINISHED') {
        <button class="w-full flex items-center justify-center gap-2 rounded-lg bg-surface-highlight/50 py-2.5 text-xs font-medium text-text-secondary hover:text-white hover:bg-surface-highlight transition-all">
          <span class="material-symbols-outlined text-[16px]">bar_chart</span>
          Details
        </button>
      }
    }
  </div>
</div>

