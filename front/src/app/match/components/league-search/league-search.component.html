<div class="relative">
  <input
    #searchInput
    type="text"
    [placeholder]="placeholder()"
    class="w-full px-4 py-3 pl-12 bg-white/90 border border-surface-highlight/50 rounded-xl text-gray-900 placeholder:text-gray-500 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition"
    [value]="searchQuery()"
    (input)="onSearchInput($event)"
  />


  <!-- Clear button -->
  @if (searchQuery().length > 0) {
    <button
      (click)="onClear()"
      class="absolute right-4 top-1/2 -translate-y-1/2 text-text-secondary hover:text-gray-900 transition"
    >
      <span class="material-symbols-outlined">close</span>
    </button>
  }
</div>

@if (showClearFilterButton()) {
  <div class="mt-3">
    <button
      (click)="onShowAllLeagues()"
      class="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-primary/10 hover:bg-primary/20 rounded-lg transition text-primary font-semibold"
    >
      <span class="material-symbols-outlined" style="font-size: 20px;">filter_list_off</span>
      <span>Show All Leagues</span>
    </button>
  </div>
}

  @if (searchQuery().length >= minChars()) {
    <div class="mt-4 bg-white border border-gray-300 rounded-lg shadow-lg p-2">
      <p class="text-sm text-gray-600 mb-2">Found: {{ filteredLeagues().length }} leagues</p>

      @if (filteredLeagues().length > 0) {
        @for (league of filteredLeagues(); track league.league_key) {
          <div
            (click)="onLeagueClick(league)"
            class="p-3 mb-2 cursor-pointer rounded hover:bg-gray-100 border border-gray-200"
            [class.bg-blue-500]="league.league_key === currentLeagueId()"
            [class.text-white]="league.league_key === currentLeagueId()"
          >
            <div class="flex items-center gap-3">
              @if (league.league_logo) {
                <img [src]="league.league_logo" [alt]="league.league_name" class="w-10 h-10 object-contain" />
              }

              <div class="flex-1">
                <div class="font-bold">{{ league.league_name }}</div>
                <div class="text-sm opacity-75">{{ league.country_name }}</div>
              </div>

              @if (league.league_key === currentLeagueId()) {
                <span class="material-symbols-outlined">check_circle</span>
              }
            </div>
          </div>
        }
      } @else {
        <p class="text-center py-8 text-gray-500">No leagues found</p>
      }
    </div>
  } @else {
    <div class="mt-4 flex items-center gap-3 text-gray-600 text-sm bg-blue-50 border border-blue-200 rounded-lg p-4">
      <span class="material-symbols-outlined text-blue-500 text-xl">info</span>
      <p>Type at least {{ minChars() }} characters to search leagues</p>
    </div>
  }

